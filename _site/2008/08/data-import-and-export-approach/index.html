<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="谢益辉" />
    <title>数据导入/导出的通用方法 | 谢益辉</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="http://yihui.name/cn/feed/" rel="alternate" title="谢益辉" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/style.css">
    <link rel="stylesheet" href="/media/css/highlight.css">
    <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <h1>数据导入/导出的通用方法</h1>
        </header>
        <nav>
        <span><a title="home page" class="" href="http://yihui.name/cn/">home</a></span>
        <span><a title="about" class="" href="http://yihui.name/cn/about/">about</a></span>
        <span><a title="publication" class="" href="http://yihui.name/cn/publication/">publication</a></span>
        <span><a title="guestbook" class="" href="http://yihui.name/cn/guestbook/">guestbook</a></span>
        <span><a title="vitae" class="" href="http://yihui.name/cn/vitae/">vitae</a></span>
        <span><a title="categories" class="" href="http://yihui.name/cn/categories/">categories</a></span>
        <span><a title="tags" class="" href="http://yihui.name/cn/tags/">tags</a></span>
        <span><a title="links" class="" href="http://yihui.name/cn/links/">links</a></span>
        <span><a title="subscribe by RSS" class="" href="http://yihui.name/cn/feed/">subscribe</a></span>
        </nav>
        <article class="content">
        <section class="post">
<p>总有人对数据的导入/导出产生疑问，比如SPSS怎样导进LISREL，或是SAS怎样导进Stata，或是Excel怎样导进R，等等。其实一般情况下这种问题并不是什么大问题，我们总是被软件蒙蔽，猜不透数据文件背后究竟是什么，或者根本没有想过文件里面究竟是什么。我对计算机文件的机制了解并不多，我只知道两种基本的格式：ASCII格式（或纯文本格式）以及二进制格式。后者是经过某种规则编码了的，所以用纯文本编辑器打开一般看不到内容，而前者就简单多了，用任何纯文本编辑器（如记事本）都可以打开看。</p>

<p>纯文本格式是几乎任何软件都支持读写的，因此它可以成为软件之间互相“沟通”的桥梁。比如Excel可以另存为CSV文件，然后由R用<code>read.csv()</code>读进来或者由SPSS的Read Text Data导进去，等等。所以一般情况下通过纯文本文件行事就足够了。</p>

<p>统计数据的形式一般都是二维表格，行为观测，列为变量；纯文本数据中当然要想办法将行列用一定的标志区分开来。对于行，当然就是换行符（例如回车），这没什么好说的，用编辑器打开看到就是一行一行的；对于列，则稍有不同，这就涉及到分隔符（separator / delimiter）的问题了，它们的作用就像是Excel或者其它表格软件中的网格线一样，将一列一列分隔开来，每一列对应一个变量，分隔符可以是任何字符，但常见的一般是逗号（<code>,</code>）或者制表符（<code>\t</code>，Tab）。所谓CSV文件，也就是以逗号为分隔符的纯文本文件，我们可以将Excel数据存为CSV格式，然后用记事本打开看看就明白了。Windows下CSV文件（<code>*.csv</code>）的图标一般是Excel的图标，其实这是很具有误导性的，CSV与Excel毫无关系，只是纯文本文件的一种而已。</p>

<p>这是关于数据的很基础的知识，但我发现很多人并不明白。怪哉。</p>

<p>纯文本文件之外的统计数据我通常推荐采用专门的数据库作为存储工具（尤其是支持SQL的数据库），而不是Excel或SPSS等软件，用数据库捣腾数据一方面比那些看起来易用的Excel或SPSS更高效，另一方面也比较安全。前面我<a href="/cn/2008/08/missing-value-and-zero-in-excel/">刚刚谈过这个问题</a>。</p>

<p>从今以后，关于数据导入/导出的邮件我也将不再回复。</p>

</section>
<section class="meta">
<span class="author">
  <a href="http://yihui.name">谢益辉</a>
</span>
<span class="time">
  /
  <time datetime="2008-08-22">2008-08-22</time>
</span>
<br />
<span class="license">
  Published under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">(CC) BY-NC-SA</a>
</span>

<span class="categories">
  in categories
  
  <a href="http://yihui.name/cn/categories/#featured" title="featured">featured</a>&nbsp;
  
  <a href="http://yihui.name/cn/categories/#statistics" title="statistics">statistics</a>&nbsp;
  
</span>


<span class="tags">
  tagged with 
  
  <a href="http://yihui.name/cn/tags/#CSV" title="CSV">CSV</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#Excel" title="Excel">Excel</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#R" title="R">R</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#SAS" title="SAS">SAS</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#SPSS" title="SPSS">SPSS</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#二进制文件" title="二进制文件">二进制文件</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#分隔符" title="分隔符">分隔符</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#数据" title="数据">数据</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#数据导入" title="数据导入">数据导入</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#数据导出" title="数据导出">数据导出</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#纯文本文件" title="纯文本文件">纯文本文件</a>&nbsp;
  
  <a href="http://yihui.name/cn/tags/#统计数据" title="统计数据">统计数据</a>&nbsp;
  
</span>

</section>
<section class="comment">
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'yihui'; // required: replace example with your forum shortname
    var disqus_url = 'http://yihui.name/cn/2008/08/data-import-and-export-approach/';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</section>


<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    if (e.target.nodeName.toUpperCase() != 'BODY') return;
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
            
        url = 'http://yihui.name/cn/2008/08/photos-from-germany/';
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = 'http://yihui.name/cn/2008/08/reply-address-of-email/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>


        </article>
      </div>
    </div>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1988641-2']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
